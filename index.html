<!DOCTYPE html>
<html>
<head>
    <title>Meteorite Impact Locations</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Updated Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css"/>

    <!-- Updated Leaflet JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>

    <!-- Your Custom CSS -->
    <style>
        #map {
            height: 600px; /* Adjust as needed */
            width: 100%;
        }
        /* Additional styles can be added here */
    </style>
</head>
    

    
<body>
    <h1>Meteorite Impact Locations</h1>
    <div id="map"></div>

    <!-- Custom JavaScript -->
    <script>
        // Map center coordinates and zoom level
        let mapCenterCoords = [0, 0]; // Update with appropriate coordinates
        let mapZoomLevel = 2; // Adjust zoom level as needed

        // Create the map
        function createMap(meteorLayer) {
            let baseLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            });

            let baseMaps = {
                "Base Layer": baseLayer
            };

            let overlayMaps = {
                "Meteorites": meteorLayer
            };

            let map = L.map('map', {
                center: mapCenterCoords,
                zoom: mapZoomLevel,
                layers: [baseLayer, meteorLayer]
            });

            L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);
        }

        // Create markers from meteor data
        function createMarkers(meteorData) {
            let meteorMarkers = [];

            meteorData.forEach(function(meteor) {
                if (meteor.reclat && meteor.reclong) {
                    let marker = L.marker([meteor.reclat, meteor.reclong])
                        .bindPopup(`<h3>${meteor.name}</h3><hr><p>Year: ${new Date(meteor.year).getFullYear()}</p>`);

                    meteorMarkers.push(marker);
                }
            });

            let meteorLayer = L.layerGroup(meteorMarkers);
            createMap(meteorLayer);
        }

        // Load meteor data from Flask API
        function loadMeteorData() {
            fetch('http://127.0.0.1:5000/api/meteor_data')
                .then(response => response.json())
                .then(data => {
                    createMarkers(data);
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        loadMeteorData();
    </script>
</body>
</html>
